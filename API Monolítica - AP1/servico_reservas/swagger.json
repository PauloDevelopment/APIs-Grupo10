{
  "swagger": "2.0",
  "info": {
    "title": "Reservas",
    "description": "Operações relacionadas a reservas",
    "version": "1.0.0"
  },
  "basePath": "/",
  "schemes": ["http"],
  "consumes": ["application/json"],
  "produces": ["application/json"],
  "paths": {
    "/reservas": {
      "get": {
        "summary": "Listar reservas",
        "responses": {
          "200": {
            "description": "Lista de reservas",
            "schema": {
              "type": "array",
              "items": { "$ref": "#/definitions/Reserva" },
              "example": [
                {
                  "id": 1,
                  "num_sala": 101,
                  "lab": true,
                  "data_reserva": "05-11-2025",
                  "turma_id": 1
                }
              ]
            }
          }
        }
      },
      "post": {
        "summary": "Criar uma nova reserva",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": { 
              "$ref": "#/definitions/ReservaCreate",
              "example": {
                "num_sala": 101,
                "lab": true,
                "data_reserva": "05-11-2025",
                "turma_id": 1
              }
            }
          }
        ],
        "responses": {
          "201": { "description": "Reserva criada" },
          "400": { "description": "Erro de validação" },
          "404": { "description": "Turma não encontrada" },
          "500": { "description": "Erro interno / comunicação com microserviço" }
        }
      }
    },
    "/reservas/{reserva_id}": {
      "parameters": [
        { "name": "reserva_id", "in": "path", "required": true, "type": "integer" }
      ],
      "put": {
        "summary": "Atualizar uma reserva",
        "parameters": [
          { "name": "reserva_id", "in": "path", "required": true, "type": "integer" },
          { "in": "body", "name": "body", "required": true, "schema": { 
            "$ref": "#/definitions/ReservaUpdate",
            "example": {
              "num_sala": 102,
              "lab": false,
              "data_reserva": "06-11-2025",
              "turma_id": 1
            }
          } }
        ],
        "responses": {
          "200": { "description": "Reserva atualizada" },
          "400": { "description": "Erro de validação" },
          "404": { "description": "Reserva ou Turma não encontrados" },
          "500": { "description": "Erro interno / comunicação com microserviço" }
        }
      },
      "delete": {
        "summary": "Remover uma reserva",
        "parameters": [
          { "name": "reserva_id", "in": "path", "required": true, "type": "integer" }
        ],
        "responses": {
          "200": { "description": "Reserva removida" },
          "404": { "description": "Reserva não encontrada" }
        }
      }
    }
  },
  "definitions": {
    "Reserva": {
      "type": "object",
      "properties": {
        "id": { "type": "integer" },
        "num_sala": { "type": "integer" },
        "lab": { "type": "boolean" },
        "data_reserva": {
          "type": "string",
          "description": "Formato: DD-MM-YYYY"
        },
        "turma_id": { "type": "integer" }
      },
      "example": {
        "id": 1,
        "num_sala": 101,
        "lab": true,
        "data_reserva": "05-11-2025",
        "turma_id": 1
      }
    },
    "ReservaCreate": {
      "type": "object",
      "required": ["num_sala", "lab", "data_reserva", "turma_id"],
      "properties": {
        "num_sala": { "type": "integer" },
        "lab": { "type": "boolean" },
        "data_reserva": {
          "type": "string",
          "description": "DD-MM-YYYY"
        },
        "turma_id": { "type": "integer" }
      },
      "example": {
        "num_sala": 101,
        "lab": true,
        "data_reserva": "05-11-2025",
        "turma_id": 1
      }
    },
    "ReservaUpdate": {
      "type": "object",
      "properties": {
        "num_sala": { "type": "integer" },
        "lab": { "type": "boolean" },
        "data_reserva": {
          "type": "string",
          "description": "DD-MM-YYYY"
        },
        "turma_id": { "type": "integer" }
      },
      "example": {
        "num_sala": 102,
        "lab": false,
        "data_reserva": "06-11-2025",
        "turma_id": 1
      }
    }
  }
}