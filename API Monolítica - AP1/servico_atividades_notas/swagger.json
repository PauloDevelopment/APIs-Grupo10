{
  "swagger": "2.0",
  "info": {
    "title": "Serviço de Atividades e Notas",
    "version": "1.0.0",
    "description": "Spec Swagger 2.0 gerada a partir dos controllers (compatível com Flasgger)."
  },
  "basePath": "/",
  "schemes": ["http"],
  "consumes": ["application/json"],
  "produces": ["application/json"],
  "tags": [
    { "name": "Atividades", "description": "Operações relacionadas a atividades" },
    { "name": "Notas", "description": "Operações relacionadas a notas" }
  ],
  "paths": {
    "/atividades": {
      "get": {
        "tags": ["Atividades"],
        "summary": "Listar atividades",
        "responses": {
          "200": {
            "description": "Lista de atividades",
            "schema": {
              "type": "array",
              "items": { "$ref": "#/definitions/Atividade" }
            }
          }
        }
      },
      "post": {
        "tags": ["Atividades"],
        "summary": "Criar uma nova atividade",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": { "$ref": "#/definitions/AtividadeCreate" }
          }
        ],
        "responses": {
          "201": { "description": "Atividade criada" },
          "400": { "description": "Erro de validação" },
          "404": { "description": "Turma ou Professor não encontrados" },
          "500": { "description": "Erro interno / comunicação com microserviço" }
        }
      }
    },
    "/atividades/{atividade_id}": {
      "put": {
        "tags": ["Atividades"],
        "summary": "Atualizar uma atividade",
        "parameters": [
          { "name": "atividade_id", "in": "path", "required": true, "type": "integer" },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": { "$ref": "#/definitions/AtividadeUpdate" }
          }
        ],
        "responses": {
          "200": { "description": "Atividade atualizada" },
          "400": { "description": "Erro de validação" },
          "404": { "description": "Atividade / Turma / Professor não encontrados" },
          "500": { "description": "Erro interno / comunicação com microserviço" }
        }
      },
      "delete": {
        "tags": ["Atividades"],
        "summary": "Remover uma atividade",
        "parameters": [{ "name": "atividade_id", "in": "path", "required": true, "type": "integer" }],
        "responses": {
          "200": { "description": "Atividade removida" },
          "404": { "description": "Atividade não encontrada" }
        }
      }
    },
    "/notas": {
      "get": {
        "tags": ["Notas"],
        "summary": "Listar notas",
        "responses": {
          "200": {
            "description": "Lista de notas",
            "schema": {
              "type": "array",
              "items": { "$ref": "#/definitions/Nota" }
            }
          }
        }
      },
      "post": {
        "tags": ["Notas"],
        "summary": "Criar uma nova nota",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": { "$ref": "#/definitions/NotaCreate" }
          }
        ],
        "responses": {
          "201": { "description": "Nota criada" },
          "400": { "description": "Erro de validação" },
          "404": { "description": "Atividade ou Aluno não encontrados" },
          "500": { "description": "Erro interno / comunicação com microserviço" }
        }
      }
    },
    "/notas/{nota_id}": {
      "put": {
        "tags": ["Notas"],
        "summary": "Atualizar uma nota",
        "parameters": [
          { "name": "nota_id", "in": "path", "required": true, "type": "integer" },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": { "$ref": "#/definitions/NotaUpdate" }
          }
        ],
        "responses": {
          "200": { "description": "Nota atualizada" },
          "400": { "description": "Erro de validação" },
          "404": { "description": "Nota / Atividade / Aluno não encontrados" },
          "500": { "description": "Erro interno / comunicação com microserviço" }
        }
      },
      "delete": {
        "tags": ["Notas"],
        "summary": "Remover uma nota",
        "parameters": [{ "name": "nota_id", "in": "path", "required": true, "type": "integer" }],
        "responses": {
          "200": { "description": "Nota removida" },
          "404": { "description": "Nota não encontrada" }
        }
      }
    }
  },
  "definitions": {
    "Atividade": {
      "type": "object",
      "properties": {
        "id": { "type": "integer", "example": 1 },
        "nome_atividade": { "type": "string", "example": "Prova de Matemática" },
        "descricao": { "type": "string", "example": "Prova do capítulo 1 ao 5" },
        "peso_porcento": { "type": "integer", "example": 20 },
        "data_entrega": { "type": "string", "example": "10-11-2025" },
        "turma_id": { "type": "integer", "example": 1 },
        "professor_id": { "type": "integer", "example": 1 }
      }
    },
    "AtividadeCreate": {
      "type": "object",
      "required": ["nome_atividade", "peso_porcento", "data_entrega", "turma_id", "professor_id"],
      "properties": {
        "nome_atividade": { "type": "string", "example": "Prova de Matemática" },
        "descricao": { "type": "string", "example": "Prova do capítulo 1 ao 5" },
        "peso_porcento": { "type": "integer", "example": 20 },
        "data_entrega": { "type": "string", "example": "10-11-2025" },
        "turma_id": { "type": "integer", "example": 1 },
        "professor_id": { "type": "integer", "example": 1 }
      }
    },
    "AtividadeUpdate": {
      "type": "object",
      "properties": {
        "nome_atividade": { "type": "string", "example": "Prova de Matemática Atualizada" },
        "descricao": { "type": "string", "example": "Prova do capítulo 1 ao 6" },
        "peso_porcento": { "type": "integer", "example": 25 },
        "data_entrega": { "type": "string", "example": "15-11-2025" },
        "turma_id": { "type": "integer", "example": 1 },
        "professor_id": { "type": "integer", "example": 1 }
      }
    },
    "Nota": {
      "type": "object",
      "properties": {
        "id": { "type": "integer", "example": 1 },
        "nota": { "type": "number", "format": "float", "example": 8.5 },
        "aluno_id": { "type": "integer", "example": 1 },
        "atividade_id": { "type": "integer", "example": 1 }
      }
    },
    "NotaCreate": {
      "type": "object",
      "required": ["nota", "aluno_id", "atividade_id"],
      "properties": {
        "nota": { "type": "number", "format": "float", "example": 8.5 },
        "aluno_id": { "type": "integer", "example": 1 },
        "atividade_id": { "type": "integer", "example": 1 }
      }
    },
    "NotaUpdate": {
      "type": "object",
      "properties": {
        "nota": { "type": "number", "format": "float", "example": 9.0 },
        "aluno_id": { "type": "integer", "example": 1 },
        "atividade_id": { "type": "integer", "example": 1 }
      }
    }
  }
}